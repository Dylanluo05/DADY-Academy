<body>
    <form id="login-form">
        <div>
            <label for="email">Email:</label>
            <input type="email" id="email" name="email">
        </div>
        <div>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password">
        </div>
        <button type="submit">Login</button>
      </form>
</body>


<script>
    const form = document.getElementById("login-form");
    form.addEventListener("submit", async (event) => {
        event.preventDefault();
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const response = await fetch("https://frq.dtsivkovski.tk/authenticate/", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, password }),
        });
        const data = await response.json();
        if (data.token) {
            localStorage.setItem("jwt", data.token);
            // Redirect to the protected area
            window.location.href = "/protected";
        } else {
            // Show an error message
            alert("Invalid credentials");
        }
    });

    // const loginResponse = fetch('https://frq.dtsivkovski.tk/authenticate', {
    //     method: 'POST',
    //     headers: { 'Content-Type': 'application/json' },
    //     body: JSON.stringify({ email, password }),
    // });

    // // If the login was successful, the server will return a JWT
    // if (loginResponse.ok) { // Extract the JWT from the response
    //     const jwt = loginResponse.headers.get('Authorization').split(' ')[1];
    //     // Store the JWT in a cookie or in local storage
    //     localStorage.setItem('jwt', jwt);
    // }
</script>
